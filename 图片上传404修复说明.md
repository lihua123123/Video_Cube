# å›¾ç‰‡ä¸Šä¼  404 é—®é¢˜ä¿®å¤

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### é—®é¢˜ 1: ä¸Šä¼ æ¥å£ 404
**åŸå› **: Vite ä»£ç†é…ç½®ç¼ºå°‘ `rewrite` è§„åˆ™

**ä¿®å¤å‰**:
```typescript
'/api': {
  target: 'http://localhost:3000',
  changeOrigin: true
  // ç¼ºå°‘ rewriteï¼Œå¯¼è‡´è¯·æ±‚ /api/admin/... ç›´æ¥å‘é€åˆ°åç«¯
}
```

å‰ç«¯è¯·æ±‚: `/api/admin/videos/upload-image`  
ä»£ç†å: `http://localhost:3000/api/admin/videos/upload-image` âŒ (åç«¯æ²¡æœ‰è¿™ä¸ªè·¯ç”±)

**ä¿®å¤å**:
```typescript
'/api': {
  target: 'http://localhost:3000',
  changeOrigin: true,
  rewrite: (path) => path.replace(/^\/api/, '') // âœ… å»æ‰ /api å‰ç¼€
}
```

å‰ç«¯è¯·æ±‚: `/api/admin/videos/upload-image`  
å»æ‰å‰ç¼€: `/admin/videos/upload-image`  
ä»£ç†å: `http://localhost:3000/admin/videos/upload-image` âœ…

### é—®é¢˜ 2: Windows è·¯å¾„é—®é¢˜ (å¾…å¤„ç†)
**é”™è¯¯æ—¥å¿—**:
```
åŸå§‹å›¾ç‰‡URL: C:\Users\86188\Desktop\assets\main-page-sections.png
å¤„ç†åå›¾ç‰‡URL: /C:\Users\86188\Desktop\assets\main-page-sections.png
```

**åŸå› **: Toast UI Editor åœ¨ Windows ä¸Šå¯èƒ½è¿”å›æœ¬åœ°æ–‡ä»¶è·¯å¾„è€Œä¸æ˜¯ä¸Šä¼ åçš„è·¯å¾„

**è§£å†³æ–¹æ¡ˆ**: è¿™ä¸ªé—®é¢˜ä¼šåœ¨å›¾ç‰‡æˆåŠŸä¸Šä¼ åè‡ªåŠ¨è§£å†³ï¼Œå› ä¸ºä¸Šä¼ æˆåŠŸåä¼šè¿”å›æ­£ç¡®çš„ `/uploads/images/xxx.png` è·¯å¾„ã€‚

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. è®¿é—®æ–°ç«¯å£
å‰ç«¯ç°åœ¨è¿è¡Œåœ¨: **http://localhost:5174**

### 2. æµ‹è¯•å›¾ç‰‡ä¸Šä¼ 
1. æ‰“å¼€ http://localhost:5174
2. è¿›å…¥ç¼–è¾‘é¡µé¢
3. åˆ‡æ¢åˆ° "Markdown ç¼–è¾‘å™¨" æ¨¡å¼
4. æ‹–æ‹½å›¾ç‰‡æˆ–ç‚¹å‡»å·¥å…·æ å›¾ç‰‡æŒ‰é’®ä¸Šä¼ 

### 3. æŸ¥çœ‹ Console è¾“å‡º
**æˆåŠŸçš„æ—¥å¿—åº”è¯¥æ˜¯**:
```javascript
å›¾ç‰‡ä¸Šä¼ æˆåŠŸ: {url: '/uploads/images/xxx.png', filename: 'xxx.png', ...}
æ’å…¥å›¾ç‰‡URL: /uploads/images/xxx.png
```

**Network æ ‡ç­¾åº”è¯¥æ˜¾ç¤º**:
- Request URL: `http://localhost:5174/api/admin/videos/upload-image`
- Status Code: `200 OK`
- Response: `{"status":true,"message":"å›¾ç‰‡ä¸Šä¼ æˆåŠŸ","data":{...}}`

---

## ğŸ“ é…ç½®æ€»ç»“

### Vite é…ç½® (vite.config.ts)
```typescript
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:3000',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, '') // âœ… å…³é”®ä¿®å¤
    },
    '/uploads': {
      target: 'http://localhost:3000',
      changeOrigin: true,
      secure: false
    }
  }
}
```

### å‰ç«¯ä¸Šä¼ ä»£ç  (MarkdownEditor.vue)
```typescript
const response = await fetch('/api/admin/videos/upload-image', {
  method: 'POST',
  body: formData,
})
```

### åç«¯è·¯ç”± (Backend/app.js)
```javascript
app.use('/admin/videos', adminVideosRouter);
// å®é™…è·¯ç”±: POST /admin/videos/upload-image
```

---

## ğŸš€ å®Œæ•´çš„è¯·æ±‚æµç¨‹

```
ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡
    â†“
Toast UI Editor è§¦å‘ addImageBlobHook
    â†“
fetch('/api/admin/videos/upload-image')
    â†“
Vite ä»£ç†æ‹¦æˆª /api å¼€å¤´çš„è¯·æ±‚
    â†“
rewrite å»æ‰ /api å‰ç¼€: /admin/videos/upload-image
    â†“
è½¬å‘åˆ°: http://localhost:3000/admin/videos/upload-image
    â†“
Express å¤„ç†ä¸Šä¼  (multer)
    â†“
ä¿å­˜åˆ°: Backend/public/uploads/images/xxx.png
    â†“
è¿”å›: {"status":true,"data":{"url":"/uploads/images/xxx.png"}}
    â†“
Toast UI Editor æ’å…¥: ![alt](/uploads/images/xxx.png)
    â†“
æµè§ˆå™¨æ¸²æŸ“: <img src="/uploads/images/xxx.png">
    â†“
Vite ä»£ç†è½¬å‘å›¾ç‰‡è¯·æ±‚
    â†“
å›¾ç‰‡æ˜¾ç¤ºæˆåŠŸ âœ…
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç«¯å£å˜æ›´**: å‰ç«¯ä» 5173 æ”¹ä¸º **5174**
2. **éœ€è¦é‡å¯**: ä¿®æ”¹ `vite.config.ts` åå¿…é¡»é‡å¯å‰ç«¯æœåŠ¡
3. **åç«¯ç«¯å£**: ç¡®ä¿åç«¯è¿è¡Œåœ¨ **3000** ç«¯å£

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¦‚æœä»ç„¶ 404
1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ:
   ```powershell
   netstat -ano | findstr :3000
   ```

2. æ£€æŸ¥å‰ç«¯ç«¯å£:
   ```powershell
   netstat -ano | findstr :5174
   ```

3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°

4. æ£€æŸ¥ Console å’Œ Network æ ‡ç­¾çš„è¯¦ç»†é”™è¯¯

---

## âœ¨ ç°åœ¨å¯ä»¥æµ‹è¯•äº†ï¼

è®¿é—®: **http://localhost:5174**

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æä¾›:
- Console çš„å®Œæ•´é”™è¯¯ä¿¡æ¯
- Network æ ‡ç­¾ä¸­ `upload-image` è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ (Headers, Response)
