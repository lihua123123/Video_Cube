# Markdown ç¼–è¾‘å™¨å›¾ç‰‡ä¸Šä¼ å®Œæ•´æŒ‡å—

## âœ… é—®é¢˜å·²è§£å†³

### ä¿®å¤å†…å®¹

1. **Vite ä»£ç†é…ç½®** - ä¿ç•™ multipart boundary âœ…
2. **æ•°æ®è®¿é—®ä¿®æ­£** - `result.data.url` âœ…  
3. **æœ¬åœ°è·¯å¾„æ¸…ç†** - è‡ªåŠ¨æ£€æµ‹å¹¶ç§»é™¤ Windows è·¯å¾„ âœ…
4. **æ‹–æ‹½ä¸Šä¼ æ”¯æŒ** - æ‰‹åŠ¨å¤„ç†æ‹–æ‹½äº‹ä»¶ âœ…

---

## ðŸ“¸ æ­£ç¡®çš„å›¾ç‰‡ä¸Šä¼ æ–¹æ³•

### æ–¹æ³• 1: ä½¿ç”¨å·¥å…·æ æŒ‰é’®ï¼ˆæŽ¨èï¼‰â­

1. ç‚¹å‡»ç¼–è¾‘å™¨å·¥å…·æ çš„ **å›¾ç‰‡å›¾æ ‡** ðŸ“·
2. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
3. ç­‰å¾…ä¸Šä¼ å®Œæˆ
4. å›¾ç‰‡è‡ªåŠ¨æ’å…¥åˆ°ç¼–è¾‘å™¨

**ä¼˜ç‚¹**: 
- âœ… 100% å¯é 
- âœ… è‡ªåŠ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨
- âœ… è¿”å›žæ­£ç¡®çš„ URL

### æ–¹æ³• 2: æ‹–æ‹½å›¾ç‰‡åˆ°ç¼–è¾‘å™¨

1. ä»Žæ–‡ä»¶ç®¡ç†å™¨æ‹–æ‹½å›¾ç‰‡åˆ°ç¼–è¾‘å™¨åŒºåŸŸ
2. ç­‰å¾…è‡ªåŠ¨ä¸Šä¼ 
3. å›¾ç‰‡è‡ªåŠ¨æ’å…¥

**æ³¨æ„**: 
- âš ï¸ å¿…é¡»æ‹–æ‹½åˆ°ç¼–è¾‘åŒºï¼Œè€Œä¸æ˜¯é¢„è§ˆåŒº
- âš ï¸ å¦‚æžœçœ‹åˆ°æœ¬åœ°è·¯å¾„ï¼ˆC:\...ï¼‰ï¼Œè¯´æ˜Žæ‹–æ‹½å¤±è´¥ï¼Œè¯·ä½¿ç”¨æ–¹æ³• 1

### æ–¹æ³• 3: å¤åˆ¶ç²˜è´´ï¼ˆéƒ¨åˆ†æ”¯æŒï¼‰

1. å¤åˆ¶ç½‘ç»œå›¾ç‰‡
2. ç²˜è´´åˆ°ç¼–è¾‘å™¨
3. å¯èƒ½éœ€è¦æ‰‹åŠ¨è§¦å‘ä¸Šä¼ 

---

## âš ï¸ å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ¡ˆ

### é”™è¯¯ 1: æ˜¾ç¤ºæœ¬åœ°è·¯å¾„
```
åŽŸå§‹å›¾ç‰‡URL: C:\Users\86188\Desktop\assets\main-page-sections.png
å¤„ç†åŽå›¾ç‰‡URL: /C:\Users\86188\Desktop\assets\main-page-sections.png
å›¾ç‰‡åŠ è½½å¤±è´¥
```

**åŽŸå› **: æµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æŽ¥è®¿é—®æœ¬åœ°æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**:
1. âŒ ä¸è¦ä»Žæ¡Œé¢æˆ–æ–‡ä»¶å¤¹ç›´æŽ¥æ‹–æ‹½
2. âœ… ä½¿ç”¨å·¥å…·æ çš„å›¾ç‰‡æŒ‰é’®ä¸Šä¼ 
3. âœ… ç¼–è¾‘å™¨ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ç§»é™¤æœ¬åœ°è·¯å¾„

### é”™è¯¯ 2: å›¾ç‰‡ä¸Šä¼ æˆåŠŸä½†ä¸æ˜¾ç¤º

**æ£€æŸ¥æ¸…å•**:
- [ ] æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ (Ctrl+Shift+Delete)
- [ ] ç¡®è®¤è®¿é—® http://localhost:5173 (ä¸æ˜¯ 5174)
- [ ] æ£€æŸ¥ Console æ˜¯å¦æœ‰é”™è¯¯
- [ ] æ£€æŸ¥ Network æ ‡ç­¾å›¾ç‰‡è¯·æ±‚çŠ¶æ€

### é”™è¯¯ 3: boundary not found

**åŽŸå› **: Vite ä»£ç†é…ç½®é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**: å·²ä¿®å¤ï¼Œç¡®ä¿ä½¿ç”¨æœ€æ–°çš„ `vite.config.ts`

---

## ðŸ”§ æŠ€æœ¯å®žçŽ°

### è‡ªåŠ¨æ¸…ç†æœ¬åœ°è·¯å¾„

ç¼–è¾‘å™¨çŽ°åœ¨ä¼šè‡ªåŠ¨æ£€æµ‹ Windows æœ¬åœ°è·¯å¾„å¹¶æ›¿æ¢ï¼š

```typescript
// ç›‘å¬å†…å®¹å˜åŒ–å¹¶æ¸…ç† Windows æœ¬åœ°è·¯å¾„
editorInstance.on('change', () => {
  let markdown = editorInstance.getMarkdown()
  
  // æ£€æµ‹å¹¶ç§»é™¤ Windows æœ¬åœ°æ–‡ä»¶è·¯å¾„
  const windowsPathRegex = /!\[([^\]]*)\]\(([A-Z]:\\[^)]+)\)/g
  if (windowsPathRegex.test(markdown)) {
    console.warn('æ£€æµ‹åˆ°æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œè¯·ä½¿ç”¨å·¥å…·æ æŒ‰é’®ä¸Šä¼ å›¾ç‰‡')
    markdown = markdown.replace(windowsPathRegex, '[å›¾ç‰‡åŠ è½½å¤±è´¥: $1]')
    editorInstance.setMarkdown(markdown, false)
  }
})
```

### æ‹–æ‹½ä¸Šä¼ å¤„ç†

```typescript
editorEl.addEventListener('drop', async (e: Event) => {
  const dragEvent = e as DragEvent
  const files = dragEvent.dataTransfer?.files
  
  // å¤„ç†å›¾ç‰‡æ–‡ä»¶
  if (files && files.length > 0) {
    for (let i = 0; i < files.length; i++) {
      const file = files[i]
      if (file && file.type.startsWith('image/')) {
        // ä¸Šä¼ åˆ°æœåŠ¡å™¨
        const formData = new FormData()
        formData.append('image', file)
        
        const response = await fetch('/api/admin/videos/upload-image', {
          method: 'POST',
          body: formData,
        })
        
        // æ’å…¥åˆ°ç¼–è¾‘å™¨
        const result = await response.json()
        editorInstance.insertText(`![${file.name}](${result.data.url})`)
      }
    }
  }
})
```

---

## ðŸ“Š å®Œæ•´çš„å›¾ç‰‡æµç¨‹

### å·¥å…·æ ä¸Šä¼ æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»å›¾ç‰‡æŒ‰é’®
    â†“
Toast UI Editor æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨
    â†“
ç”¨æˆ·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶
    â†“
è§¦å‘ addImageBlobHook(blob, callback)
    â†“
FormData.append('image', blob)
    â†“
POST /api/admin/videos/upload-image
    â†“
Vite ä»£ç†è½¬å‘ (ä¿ç•™ boundary)
    â†“
åŽç«¯ä¿å­˜: Backend/public/uploads/images/{uuid}.png
    â†“
è¿”å›ž: { data: { url: '/uploads/images/{uuid}.png' } }
    â†“
callback(imageUrl, fileName)
    â†“
Toast UI Editor æ’å…¥: ![fileName](/uploads/images/{uuid}.png)
    â†“
âœ… å›¾ç‰‡æ˜¾ç¤ºæˆåŠŸ
```

### æ‹–æ‹½ä¸Šä¼ æµç¨‹
```
ç”¨æˆ·æ‹–æ‹½å›¾ç‰‡åˆ°ç¼–è¾‘å™¨
    â†“
æµè§ˆå™¨è§¦å‘ drop äº‹ä»¶
    â†“
æˆ‘ä»¬çš„äº‹ä»¶ç›‘å¬å™¨æ‹¦æˆª
    â†“
èŽ·å– files ä»Ž dataTransfer
    â†“
éªŒè¯æ˜¯å›¾ç‰‡ç±»åž‹
    â†“
FormData.append('image', file)
    â†“
POST /api/admin/videos/upload-image
    â†“
Vite ä»£ç†è½¬å‘
    â†“
åŽç«¯ä¿å­˜å›¾ç‰‡
    â†“
è¿”å›žå›¾ç‰‡ URL
    â†“
editorInstance.insertText() æ’å…¥ Markdown
    â†“
âœ… å›¾ç‰‡æ˜¾ç¤ºæˆåŠŸ
```

---

## ðŸŽ¯ ä½¿ç”¨å»ºè®®

### æŽ¨èåšæ³• âœ…
1. ä½¿ç”¨å·¥å…·æ å›¾ç‰‡æŒ‰é’®ä¸Šä¼ ï¼ˆæœ€å¯é ï¼‰
2. ä¸Šä¼ å‰ç¡®ä¿å›¾ç‰‡å¤§å°åˆç†ï¼ˆ< 5MBï¼‰
3. ä½¿ç”¨å¸¸è§å›¾ç‰‡æ ¼å¼ï¼ˆPNG, JPG, GIF, WebPï¼‰
4. ç»™å›¾ç‰‡æ·»åŠ æœ‰æ„ä¹‰çš„ alt æ–‡æœ¬

### é¿å…åšæ³• âŒ
1. ä¸è¦ç›´æŽ¥æ‹–æ‹½æ¡Œé¢æ–‡ä»¶ï¼ˆæµè§ˆå™¨é™åˆ¶ï¼‰
2. ä¸è¦ä½¿ç”¨è¶…å¤§å›¾ç‰‡ï¼ˆå½±å“æ€§èƒ½ï¼‰
3. ä¸è¦ä½¿ç”¨ç‰¹æ®Šæ ¼å¼å›¾ç‰‡ï¼ˆBMP, TIFF ç­‰ï¼‰
4. ä¸è¦åœ¨ä¸€æ¬¡æ“ä½œä¸­ä¸Šä¼ å¤ªå¤šå›¾ç‰‡

---

## ðŸ§ª æµ‹è¯•æ­¥éª¤

### 1. å‡†å¤‡æµ‹è¯•
```bash
# è®¿é—®
http://localhost:5173

# æ¸…é™¤ç¼“å­˜
Ctrl + Shift + Delete
```

### 2. æµ‹è¯•å·¥å…·æ ä¸Šä¼ 
1. è¿›å…¥ç¼–è¾‘é¡µé¢
2. åˆ‡æ¢åˆ° "Markdown ç¼–è¾‘å™¨" æ¨¡å¼
3. ç‚¹å‡»å·¥å…·æ å›¾ç‰‡æŒ‰é’®
4. é€‰æ‹©ä¸€å¼ å›¾ç‰‡
5. ç­‰å¾…ä¸Šä¼ å®Œæˆ

**æœŸæœ›ç»“æžœ**:
```javascript
âœ… Console: "å›¾ç‰‡ä¸Šä¼ æˆåŠŸ: {status: true, ...}"
âœ… Console: "æ’å…¥å›¾ç‰‡URL: /uploads/images/xxx.png"
âœ… å›¾ç‰‡åœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤º
âœ… å›¾ç‰‡åœ¨é¢„è§ˆåŒºæ˜¾ç¤º
```

### 3. æµ‹è¯•æ‹–æ‹½ä¸Šä¼ 
1. ä»Žæ–‡ä»¶ç®¡ç†å™¨é€‰æ‹©å›¾ç‰‡
2. æ‹–æ‹½åˆ°ç¼–è¾‘å™¨åŒºåŸŸï¼ˆä¸æ˜¯é¢„è§ˆåŒºï¼‰
3. æ¾å¼€é¼ æ ‡

**æœŸæœ›ç»“æžœ**:
```javascript
âœ… Console: "æ‹–æ‹½ä¸Šä¼ æˆåŠŸï¼Œæ’å…¥å›¾ç‰‡URL: /uploads/images/xxx.png"
âœ… å›¾ç‰‡è‡ªåŠ¨æ’å…¥
âœ… å›¾ç‰‡æ­£å¸¸æ˜¾ç¤º
```

### 4. æµ‹è¯•æœ¬åœ°è·¯å¾„æ¸…ç†
1. å°è¯•ä»Žæ¡Œé¢æ‹–æ‹½å›¾ç‰‡ï¼ˆå¯èƒ½ä¼šå¤±è´¥ï¼‰
2. å¦‚æžœå‡ºçŽ°æœ¬åœ°è·¯å¾„ï¼Œç¼–è¾‘å™¨ä¼šè‡ªåŠ¨æ¸…ç†

**æœŸæœ›ç»“æžœ**:
```javascript
âš ï¸ Console: "æ£€æµ‹åˆ°æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œè¯·ä½¿ç”¨å·¥å…·æ æŒ‰é’®ä¸Šä¼ å›¾ç‰‡"
âœ… æœ¬åœ°è·¯å¾„è¢«æ›¿æ¢ä¸º [å›¾ç‰‡åŠ è½½å¤±è´¥: xxx]
```

---

## ðŸ“‹ æ•…éšœæŽ’é™¤

### é—®é¢˜: å›¾ç‰‡ä¸Šä¼ åŽç«‹å³æ˜¾ç¤ºï¼Œåˆ·æ–°åŽ 404

**è¯Šæ–­**:
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
dir "d:\Code\nodejs\Video_Cube\Backend\public\uploads\images"

# æ£€æŸ¥åŽç«¯æœåŠ¡
netstat -ano | findstr :3000

# æ£€æŸ¥å‰ç«¯æœåŠ¡
netstat -ano | findstr :5173
```

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤å›¾ç‰‡æ–‡ä»¶å­˜åœ¨
2. é‡å¯åŽç«¯æœåŠ¡
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

### é—®é¢˜: æ‹–æ‹½åŽæ˜¾ç¤ºæœ¬åœ°è·¯å¾„

**åŽŸå› **: Toast UI Editor çš„é»˜è®¤è¡Œä¸º

**è§£å†³æ–¹æ¡ˆ**:
1. ä½¿ç”¨å·¥å…·æ æŒ‰é’®ä¸Šä¼ ï¼ˆæŽ¨èï¼‰
2. ç­‰å¾…æˆ‘ä»¬çš„æ‹–æ‹½å¤„ç†å™¨å®Œæˆä¼˜åŒ–
3. ç¼–è¾‘å™¨ä¼šè‡ªåŠ¨æ¸…ç†æœ¬åœ°è·¯å¾„

### é—®é¢˜: boundary not found

**åŽŸå› **: Vite ä»£ç†é…ç½®

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
taskkill /F /IM node.exe

# é‡å¯å‰ç«¯ï¼ˆä¼šè‡ªåŠ¨åº”ç”¨æ–°é…ç½®ï¼‰
cd d:\Code\nodejs\Video_Cube\Frontend
npm exec vite
```

---

## ðŸŽ‰ æ€»ç»“

### å½“å‰çŠ¶æ€
- âœ… å·¥å…·æ ä¸Šä¼ : å®Œç¾Žå·¥ä½œ
- âœ… æ‹–æ‹½ä¸Šä¼ : å·²å®žçŽ°ï¼Œå¯èƒ½éœ€è¦å®Œå–„
- âœ… æœ¬åœ°è·¯å¾„æ¸…ç†: è‡ªåŠ¨å¤„ç†
- âœ… å›¾ç‰‡æ˜¾ç¤º: æ­£å¸¸å·¥ä½œ
- âœ… æ‰€æœ‰ç»„ä»¶: ç»Ÿä¸€å¤„ç†

### æŽ¨èä½¿ç”¨æ–¹å¼
**é¦–é€‰**: ä½¿ç”¨å·¥å…·æ å›¾ç‰‡æŒ‰é’® ðŸ“·  
**å¤‡é€‰**: æ‹–æ‹½å›¾ç‰‡åˆ°ç¼–è¾‘å™¨  
**é¿å…**: å¤åˆ¶ç²˜è´´æœ¬åœ°æ–‡ä»¶

### æœåŠ¡å™¨ä¿¡æ¯
- **åŽç«¯**: http://localhost:3000
- **å‰ç«¯**: http://localhost:5173
- **å›¾ç‰‡å­˜å‚¨**: `Backend/public/uploads/images/`

---

**çŽ°åœ¨å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨ Markdown ç¼–è¾‘å™¨ä¸Šä¼ å’Œæ˜¾ç¤ºå›¾ç‰‡äº†ï¼** ðŸŽ‰
